@page "/dashboard"
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components.Authorization
@using SmartLearn.Blazor.Services
@attribute [Authorize]
@inject AuthService AuthService
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthenticationStateProvider

<PageTitle>Dashboard - SmartLearn AI</PageTitle>

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-4">
    <MudGrid>
        <MudItem xs="12">
            <MudText Typo="Typo.h3" Class="mb-4">Welcome to SmartLearn AI</MudText>
            <MudText Typo="Typo.subtitle1" Class="mb-6">Your personalized learning dashboard</MudText>
        </MudItem>
        
        <MudItem xs="12" md="4">
            <MudCard>
                <MudCardContent>
                    <div class="d-flex align-center">
                        <MudIcon Icon="@Icons.Material.Filled.School" Color="Color.Primary" Size="Size.Large" Class="mr-3" />
                        <div>
                            <MudText Typo="Typo.h6">My Courses</MudText>
                            <MudText Typo="Typo.body2">View and manage your enrolled courses</MudText>
                        </div>
                    </div>
                </MudCardContent>
                <MudCardActions>
                    <MudButton Variant="Variant.Text" Color="Color.Primary">View Courses</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>
        
        <MudItem xs="12" md="4">
            <MudCard>
                <MudCardContent>
                    <div class="d-flex align-center">
                        <MudIcon Icon="@Icons.Material.Filled.Quiz" Color="Color.Secondary" Size="Size.Large" Class="mr-3" />
                        <div>
                            <MudText Typo="Typo.h6">AI Quizzes</MudText>
                            <MudText Typo="Typo.body2">Generate and take AI-powered quizzes</MudText>
                        </div>
                    </div>
                </MudCardContent>
                <MudCardActions>
                    <MudButton Variant="Variant.Text" Color="Color.Secondary">Take Quiz</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>
        
        <MudItem xs="12" md="4">
            <MudCard>
                <MudCardContent>
                    <div class="d-flex align-center">
                        <MudIcon Icon="@Icons.Material.Filled.TrendingUp" Color="Color.Success" Size="Size.Large" Class="mr-3" />
                        <div>
                            <MudText Typo="Typo.h6">Progress</MudText>
                            <MudText Typo="Typo.body2">Track your learning progress</MudText>
                        </div>
                    </div>
                </MudCardContent>
                <MudCardActions>
                    <MudButton Variant="Variant.Text" Color="Color.Success">View Progress</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>
        
        <MudItem xs="12">
            <MudCard>
                <MudCardContent>
                    <MudText Typo="Typo.h5" Class="mb-4">Recent Activity</MudText>
                    <MudText Typo="Typo.body1" Class="mb-4">
                        Welcome to SmartLearn AI! Your journey to personalized learning begins here.
                    </MudText>
                    <MudList>
                        <MudListItem>
                            <MudListItemIcon>
                                <MudIcon Icon="@Icons.Material.Filled.Check" Color="Color.Success" />
                            </MudListItemIcon>
                            <MudListItemText>
                                <MudText Typo="Typo.body2">Account created successfully</MudText>
                            </MudListItemText>
                        </MudListItem>
                        <MudListItem>
                            <MudListItemIcon>
                                <MudIcon Icon="@Icons.Material.Filled.Info" Color="Color.Info" />
                            </MudListItemIcon>
                            <MudListItemText>
                                <MudText Typo="Typo.body2">Complete your profile to get started</MudText>
                            </MudListItemText>
                        </MudListItem>
                        <MudListItem>
                            <MudListItemIcon>
                                <MudIcon Icon="@Icons.Material.Filled.Star" Color="Color.Warning" />
                            </MudListItemIcon>
                            <MudListItemText>
                                <MudText Typo="Typo.body2">Explore our AI-powered features</MudText>
                            </MudListItemText>
                        </MudListItem>
                    </MudList>
                </MudCardContent>
            </MudCard>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        if (!authState.User.Identity.IsAuthenticated)
        {
            Navigation.NavigateTo("/login");
        }
    }
}